/*jshint node:true */"use strict";module.exports=function(e,t){var n=this,r,i,s=!1,o,u,a;r=function(e,r){var i=process.hrtime(o);s&&!e&&(e=new Error("task completion callback called too many times"));s=!0;var u=i[0]+i[1]/1e9;t.call(n,e,{duration:u,hrDuration:i,runMethod:r})};i=function(e){r(e,"callback")};try{o=process.hrtime();u=e(i)}catch(f){return r(f,"catch")}if(u&&typeof u.done=="function")u.done(function(){r(null,"promise")},function(e){r(e,"promise")});else if(u&&typeof u.pipe=="function"){u.on("error",function(e){a=e});u.on("data",function(){a=null});u.once("end",function(){r(a,"stream")})}else e.length===0&&r(null,"sync")};