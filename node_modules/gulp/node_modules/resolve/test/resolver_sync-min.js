var test=require("tap").test,resolve=require("../");test("foo",function(e){var t=__dirname+"/resolver";e.equal(resolve.sync("./foo",{basedir:t}),t+"/foo.js");e.equal(resolve.sync("./foo.js",{basedir:t}),t+"/foo.js");e.throws(function(){resolve.sync("foo",{basedir:t})});e.end()});test("bar",function(e){var t=__dirname+"/resolver";e.equal(resolve.sync("foo",{basedir:t+"/bar"}),t+"/bar/node_modules/foo/index.js");e.end()});test("baz",function(e){var t=__dirname+"/resolver";e.equal(resolve.sync("./baz",{basedir:t}),t+"/baz/quux.js");e.end()});test("biz",function(e){var t=__dirname+"/resolver/biz/node_modules";e.equal(resolve.sync("./grux",{basedir:t}),t+"/grux/index.js");e.equal(resolve.sync("tiv",{basedir:t+"/grux"}),t+"/tiv/index.js");e.equal(resolve.sync("grux",{basedir:t+"/tiv"}),t+"/grux/index.js");e.end()});test("normalize",function(e){var t=__dirname+"/resolver/biz/node_modules/grux";e.equal(resolve.sync("../grux",{basedir:t}),t+"/index.js");e.end()});test("cup",function(e){var t=__dirname+"/resolver";e.equal(resolve.sync("./cup",{basedir:t,extensions:[".js",".coffee"]}),t+"/cup.coffee");e.equal(resolve.sync("./cup.coffee",{basedir:t}),t+"/cup.coffee");e.throws(function(){resolve.sync("./cup",{basedir:t,extensions:[".js"]})});e.end()});test("mug",function(e){var t=__dirname+"/resolver";e.equal(resolve.sync("./mug",{basedir:t}),t+"/mug.js");e.equal(resolve.sync("./mug",{basedir:t,extensions:[".coffee",".js"]}),t+"/mug.coffee");e.equal(resolve.sync("./mug",{basedir:t,extensions:[".js",".coffee"]}),t+"/mug.js");e.end()});test("other path",function(e){var t=__dirname+"/resolver",n=t+"/bar",r=t+"/other_path",i=require("path");e.equal(resolve.sync("root",{basedir:n,paths:[r]}),t+"/other_path/root.js");e.equal(resolve.sync("lib/other-lib",{basedir:n,paths:[r]}),t+"/other_path/lib/other-lib.js");e.throws(function(){resolve.sync("root",{basedir:n})});e.throws(function(){resolve.sync("zzz",{basedir:n,paths:[r]})});e.end()});test("incorrect main",function(e){var t=__dirname+"/resolver",n=t+"/incorrect_main";e.equal(resolve.sync("./incorrect_main",{basedir:t}),n+"/index.js");e.end()});test("#25: node modules with the same name as node stdlib modules",function(e){var t=__dirname+"/resolver/punycode";e.equal(resolve.sync("punycode",{basedir:t}),t+"/node_modules/punycode/index.js");e.end()});