var test=require("tap").test,resolve=require("../");test("mock",function(e){function n(e){return{basedir:e,isFile:function(e){return t.hasOwnProperty(e)},readFileSync:function(e){return t[e]}}}e.plan(4);var t={"/foo/bar/baz.js":"beep"};e.equal(resolve.sync("./baz",n("/foo/bar")),"/foo/bar/baz.js");e.equal(resolve.sync("./baz.js",n("/foo/bar")),"/foo/bar/baz.js");e.throws(function(){resolve.sync("baz",n("/foo/bar"))});e.throws(function(){resolve.sync("../baz",n("/foo/bar"))})});test("mock package",function(e){function n(e){return{basedir:e,isFile:function(e){return t.hasOwnProperty(e)},readFileSync:function(e){return t[e]}}}e.plan(1);var t={"/foo/node_modules/bar/baz.js":"beep","/foo/node_modules/bar/package.json":JSON.stringify({main:"./baz.js"})};e.equal(resolve.sync("bar",n("/foo")),"/foo/node_modules/bar/baz.js")});