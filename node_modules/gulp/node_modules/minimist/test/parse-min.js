var parse=require("../"),test=require("tape");test("parse args",function(e){e.deepEqual(parse(["--no-moo"]),{moo:!1,_:[]},"no");e.deepEqual(parse(["-v","a","-v","b","-v","c"]),{v:["a","b","c"],_:[]},"multi");e.end()});test("comprehensive",function(e){e.deepEqual(parse(["--name=meowmers","bare","-cats","woo","-h","awesome","--multi=quux","--key","value","-b","--bool","--no-meep","--multi=baz","--","--not-a-flag","eek"]),{c:!0,a:!0,t:!0,s:"woo",h:"awesome",b:!0,bool:!0,key:"value",multi:["quux","baz"],meep:!1,name:"meowmers",_:["bare","--not-a-flag","eek"]});e.end()});test("nums",function(e){var t=parse(["-x","1234","-y","5.67","-z","1e7","-w","10f","--hex","0xdeadbeef","789"]);e.deepEqual(t,{x:1234,y:5.67,z:1e7,w:"10f",hex:3735928559,_:[789]});e.deepEqual(typeof t.x,"number");e.deepEqual(typeof t.y,"number");e.deepEqual(typeof t.z,"number");e.deepEqual(typeof t.w,"string");e.deepEqual(typeof t.hex,"number");e.deepEqual(typeof t._[0],"number");e.end()});test("flag boolean",function(e){var t=parse(["-t","moo"],{"boolean":"t"});e.deepEqual(t,{t:!0,_:["moo"]});e.deepEqual(typeof t.t,"boolean");e.end()});test("flag boolean value",function(e){var t=parse(["--verbose","false","moo","-t","true"],{"boolean":["t","verbose"],"default":{verbose:!0}});e.deepEqual(t,{verbose:!1,t:!0,_:["moo"]});e.deepEqual(typeof t.verbose,"boolean");e.deepEqual(typeof t.t,"boolean");e.end()});test("flag boolean default false",function(e){var t=parse(["moo"],{"boolean":["t","verbose"],"default":{verbose:!1,t:!1}});e.deepEqual(t,{verbose:!1,t:!1,_:["moo"]});e.deepEqual(typeof t.verbose,"boolean");e.deepEqual(typeof t.t,"boolean");e.end()});test("boolean groups",function(e){var t=parse(["-x","-z","one","two","three"],{"boolean":["x","y","z"]});e.deepEqual(t,{x:!0,y:!1,z:!0,_:["one","two","three"]});e.deepEqual(typeof t.x,"boolean");e.deepEqual(typeof t.y,"boolean");e.deepEqual(typeof t.z,"boolean");e.end()});test("newlines in params",function(e){var t=parse(["-s","X\nX"]);e.deepEqual(t,{_:[],s:"X\nX"});t=parse(["--s=X\nX"]);e.deepEqual(t,{_:[],s:"X\nX"});e.end()});test("strings",function(e){var t=parse(["-s","0001234"],{string:"s"}).s;e.equal(t,"0001234");e.equal(typeof t,"string");var n=parse(["-x","56"],{string:"x"}).x;e.equal(n,"56");e.equal(typeof n,"string");e.end()});test("stringArgs",function(e){var t=parse(["  ","  "],{string:"_"})._;e.same(t.length,2);e.same(typeof t[0],"string");e.same(t[0],"  ");e.same(typeof t[1],"string");e.same(t[1],"  ");e.end()});test("slashBreak",function(e){e.same(parse(["-I/foo/bar/baz"]),{I:"/foo/bar/baz",_:[]});e.same(parse(["-xyz/foo/bar/baz"]),{x:!0,y:!0,z:"/foo/bar/baz",_:[]});e.end()});test("alias",function(e){var t=parse(["-f","11","--zoom","55"],{alias:{z:"zoom"}});e.equal(t.zoom,55);e.equal(t.z,t.zoom);e.equal(t.f,11);e.end()});test("multiAlias",function(e){var t=parse(["-f","11","--zoom","55"],{alias:{z:["zm","zoom"]}});e.equal(t.zoom,55);e.equal(t.z,t.zoom);e.equal(t.z,t.zm);e.equal(t.f,11);e.end()});test("nested dotted objects",function(e){var t=parse(["--foo.bar","3","--foo.baz","4","--foo.quux.quibble","5","--foo.quux.o_O","--beep.boop"]);e.same(t.foo,{bar:3,baz:4,quux:{quibble:5,o_O:!0}});e.same(t.beep,{boop:!0});e.end()});test("boolean and alias with chainable api",function(e){var t=["-h","derp"],n=["--herp","derp"],r={herp:{alias:"h","boolean":!0}},i=parse(t,{"boolean":"herp",alias:{h:"herp"}}),s=parse(n,{"boolean":"herp",alias:{h:"herp"}}),o={herp:!0,h:!0,_:["derp"]};e.same(i,o);e.same(s,o);e.end()});test("boolean and alias with options hash",function(e){var t=["-h","derp"],n=["--herp","derp"],r={alias:{h:"herp"},"boolean":"herp"},i=parse(t,r),s=parse(n,r),o={herp:!0,h:!0,_:["derp"]};e.same(i,o);e.same(s,o);e.end()});test("boolean and alias using explicit true",function(e){var t=["-h","true"],n=["--herp","true"],r={alias:{h:"herp"},"boolean":"h"},i=parse(t,r),s=parse(n,r),o={herp:!0,h:!0,_:[]};e.same(i,o);e.same(s,o);e.end()});test("boolean and --x=true",function(e){var t=parse(["--boool","--other=true"],{"boolean":"boool"});e.same(t.boool,!0);e.same(t.other,"true");t=parse(["--boool","--other=false"],{"boolean":"boool"});e.same(t.boool,!0);e.same(t.other,"false");e.end()});