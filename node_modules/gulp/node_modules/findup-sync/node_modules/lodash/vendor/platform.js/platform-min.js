/*!
 * Platform.js v1.0.0 <http://mths.be/platform>
 * Copyright 2010-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <http://mths.be/mit>
 */(function(e){"use strict";function m(e){e=String(e);return e.charAt(0).toUpperCase()+e.slice(1)}function g(e,t){var n=-1,r=e.length;if(r==r>>>0)while(++n<r)t(e[n],n,e);else b(e,t)}function y(e){e=N(e);return/^(?:webOS|i(?:OS|P))/.test(e)?e:m(e)}function b(e,t){for(var n in e)E(e,n)&&t(e[n],n,e)}function w(e){return e==null?m(e):s.call(e).slice(8,-1)}function E(){E=function(e,t){var n=e!=null&&(e.constructor||Object).prototype;return!!n&&t in Object(e)&&!(t in n&&e[t]===n[t])};w(l)=="Function"?E=function(e,t){return e!=null&&l.call(e,t)}:{}.__proto__==Object.prototype&&(E=function(e,t){var n=!1;if(e!=null){e=Object(e);e.__proto__=[e.__proto__,e.__proto__=null,n=t in e][0]}return n});return E.apply(this,arguments)}function S(e,t){var n=e!=null?typeof e[t]:"number";return!/^(?:boolean|number|string|undefined)$/.test(n)&&(n=="object"?!!e[t]:!0)}function x(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function T(e,t){var n=null;g(e,function(r,i){n=t(n,r,i,e)});return n}function N(e){return String(e).replace(/^ +| +$/g,"")}function C(n){function P(e){return T(e,function(e,t){return e||RegExp("\\b"+(t.pattern||x(t))+"\\b","i").exec(n)&&(t.label||t)})}function H(e){return T(e,function(e,t,r){return e||(t[M]||t[0,/^[a-z]+(?: +[a-z]+\b)*/i.exec(M)]||RegExp("\\b"+(r.pattern||x(r))+"(?:\\b|\\w*\\d)","i").exec(n))&&(r.label||r)})}function B(e){return T(e,function(e,t){return e||RegExp("\\b"+(t.pattern||x(t))+"\\b","i").exec(n)&&(t.label||t)})}function j(e){return T(e,function(e,t){var r=t.pattern||x(t);if(!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(n))){l={6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};/^Win/i.test(e)&&(l=l[0,/[\d.]+$/.exec(e)])&&(e="Windows "+l);e=y(String(e).replace(RegExp(r,"i"),t.label||t).replace(/ ce$/i," CE").replace(/hpw/i,"web").replace(/Macintosh/,"Mac OS").replace(/_PowerPC/i," OS").replace(/(OS X) [^ \d]+/i,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/x86\.64/gi,"x86_64").split(" on ")[0])}return e})}function F(e){return T(e,function(e,t){var r=t.pattern||x(t);if(!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(n)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(n))){(e=String(t.label||e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]);t=t.label||t;e=y(e[0].replace(RegExp(r,"i"),t).replace(RegExp("; *(?:"+t+"[_-])?","i")," ").replace(RegExp("("+t+")(\\w)","i"),"$1 $2"))}return e})}function I(e){return T(e,function(e,t){return e||(RegExp(t+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(n)||0)[1]||null})}function q(){return this.description||""}n||(n=v);var l,m=n,g=[],E=null,k=n==v,L=k&&h&&typeof h.version=="function"&&h.version(),A=P([{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","Trident","KHTML","Gecko"]),O=B(["Adobe AIR","Arora","Avant Browser","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","Iron","K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini","Opera","Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"MSIE"},"Safari"]),M=F(["BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},"Google TV","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation Vita","TouchPad","Transformer","Xoom"]),_=H({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},LG:{},Motorola:{Xoom:1},Nokia:{},Samsung:{"Galaxy S":1,"Galaxy S2":1},Sony:{"PlayStation Vita":1}}),D=j(["Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);A&&(A=[A]);_&&!M&&(M=F([_]));if(l=/Google TV/.exec(M))M=l[0];/\bSimulator\b/i.test(n)&&(M=(M?M+" ":"")+"Simulator");if(/^iP/.test(M)){O||(O="Safari");D="iOS"+((l=/ OS ([\d_]+)/i.exec(n))?" "+l[1].replace(/_/g,"."):"")}else if(O=="Konqueror"&&!/buntu/i.test(D))D="Kubuntu";else if(_&&_!="Google"&&/Chrome|Vita/.test(O+";"+M)){O="Android Browser";D=/Android/.test(D)?D:"Android"}else if(!O||(l=!/\bMinefield\b/i.test(n)&&/Firefox|Safari/.exec(O))){O&&!M&&/[\/,]|^[^(]+?\)/.test(n.slice(n.indexOf(l+"/")+8))&&(O=null);(l=M||_||D)&&(M||_||/Android|Symbian OS|Tablet OS|webOS/.test(D))&&(O=/[a-z]+(?: Hat)?/i.exec(/Android/.test(D)?D:l)+" Browser")}L||(L=I(["(?:Cloud9|CriOS|CrMo|Opera ?Mini|Raven|Silk(?!/[\\d.]+$))","Version",x(O),"(?:Firefox|Minefield|NetFront)"]));if(A=="iCab"&&parseFloat(L)>3)A=["WebKit"];else if(l=/Opera/.test(O)&&"Presto"||/\b(?:Midori|Nook|Safari)\b/i.test(n)&&"WebKit"||!A&&/\bMSIE\b/i.test(n)&&(/^Mac/.test(D)?"Tasman":"Trident"))A=[l];if(k){if(S(e,"global")){if(o){l=o.lang.System;m=l.getProperty("os.arch");D=D||l.getProperty("os.name")+" "+l.getProperty("os.version")}if(typeof exports=="object"&&exports){if(d==t&&typeof system=="object"&&(l=[system])[0]){D||(D=l[0].os||null);try{l[1]=require("ringo/engine").version;L=l[1].join(".");O="RingoJS"}catch(R){l[0].global==r&&(O="Narwhal")}}else if(typeof process=="object"&&(l=process)){O="Node.js";m=l.arch;D=l.platform;L=/[\d.]+/.exec(l.version)[0]}}else w(e.environment)=="Environment"&&(O="Rhino")}else if(w(l=e.runtime)=="ScriptBridgingProxyObject"){O="Adobe AIR";D=l.flash.system.Capabilities.os}else if(w(l=e.phantom)=="RuntimeObject"){O="PhantomJS";L=(l=l.version||null)&&l.major+"."+l.minor+"."+l.patch}else if(typeof f.documentMode=="number"&&(l=/\bTrident\/(\d+)/i.exec(n))){L=[L,f.documentMode];if((l=+l[1]+4)!=L[1]){g.push("IE "+L[1]+" mode");A[1]="";L[1]=l}L=O=="IE"?String(L[1].toFixed(1)):L[0]}D=D&&y(D)}if(L&&(l=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(L)||/(?:alpha|beta)(?: ?\d)?/i.exec(n+";"+(k&&c.appMinorVersion))||/\bMinefield\b/i.test(n)&&"a")){E=/b/i.test(l)?"beta":"alpha";L=L.replace(RegExp(l+"\\+?$"),"")+(E=="beta"?a:u)+(/\d+\+?/.exec(l)||"")}if(O=="Fennec")O="Firefox Mobile";else if(O=="Maxthon"&&L)L=L.replace(/\.[\d.]+/,".x");else if(O=="Silk"){if(!/Mobi/i.test(n)){D="Android";g.unshift("desktop mode")}/Accelerated *= *true/i.test(n)&&g.unshift("accelerated")}else if(O=="IE"&&(l=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(n)||0)[1])){O+=" Mobile";D="Windows Phone OS "+l+".x";g.unshift("desktop mode")}else if((O=="IE"||O&&!M&&!/Browser|Mobi/.test(O))&&(D=="Windows CE"||/Mobi/i.test(n)))O+=" Mobile";else if(O=="IE"&&k&&typeof external=="object"&&!external)g.unshift("platform preview");else if(/BlackBerry/.test(M)&&(l=(RegExp(M.replace(/ +/g," *")+"/([.\\d]+)","i").exec(n)||0)[1]||L)){D="Device Software "+l;L=null}else if(this!=b&&(k&&h||/Opera/.test(O)&&/\b(?:MSIE|Firefox)\b/i.test(n)||O=="Firefox"&&/OS X (?:\d+\.){2,}/.test(D)||O=="IE"&&(D&&!/^Win/.test(D)&&L>5.5||/Windows XP/.test(D)&&L>8||L==8&&!/Trident/.test(n)))&&!i.test(l=C.call(b,n.replace(i,"")+";"))&&l.name){l="ing as "+l.name+((l=l.version)?" "+l:"");if(i.test(O)){/IE/.test(l)&&D=="Mac OS"&&(D=null);l="identify"+l}else{l="mask"+l;p?O=y(p.replace(/([a-z])([A-Z])/g,"$1 $2")):O="Opera";/IE/.test(l)&&(D=null);k||(L=null)}A=["Presto"];g.push(l)}if(l=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(n)||0)[1]){l=[parseFloat(l.replace(/\.(\d)$/,".0$1")),l];if(O=="Safari"&&l[1].slice(-1)=="+"){O="WebKit Nightly";E="alpha";L=l[1].slice(0,-1)}else if(L==l[1]||L==(/\bSafari\/([\d.]+\+?)/i.exec(n)||0)[1])L=null;l=[l[0],(/\bChrome\/([\d.]+)/i.exec(n)||0)[1]];if(!k||/internal|\n/i.test(s.toString())&&!l[1]){A[1]="like Safari";l=(l=l[0],l<400?1:l<500?2:l<526?3:l<533?4:l<534?"4+":l<535?5:"5")}else{A[1]="like Chrome";l=l[1]||(l=l[0],l<530?1:l<532?2:l<532.05?3:l<533?4:l<534.03?5:l<534.07?6:l<534.1?7:l<534.13?8:l<534.16?9:l<534.24?10:l<534.3?11:l<535.01?12:l<535.02?"13+":l<535.07?15:l<535.11?16:l<535.19?17:l<536.05?18:l<536.1?19:l<537.01?20:"21")}A[1]+=" "+(l+=typeof l=="number"?".x":/[.+]/.test(l)?"":"+");O=="Safari"&&(!L||parseInt(L)>45)&&(L=l)}if(O=="Opera"&&(l=/(?:zbov|zvav)$/.exec(D))){O+=" ";g.unshift("desktop mode");if(l=="zvav"){O+="Mini";L=null}else O+="Mobile"}else if(O=="Safari"&&/Chrome/.exec(A[1])){g.unshift("desktop mode");O="Chrome Mobile";L=null;if(/Mac OS X/.test(D)){_="Apple";D="iOS 4.3+"}else D=null}L&&L.indexOf(l=/[\d.]+$/.exec(D))==0&&n.indexOf("/"+l+"-")>-1&&(D=N(D.replace(l,"")));A&&!/Avant|Nook/.test(O)&&(/Browser|Lunascape|Maxthon/.test(O)||/^(?:Adobe|Arora|Midori|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(O)&&A[1])&&(l=A[A.length-1])&&g.push(l);g.length&&(g=["("+g.join("; ")+")"]);_&&M&&M.indexOf(_)<0&&g.push("on "+_);M&&g.push((/^on /.test(g[g.length-1])?"":"on ")+M);if(D){l=/ ([\d.+]+)$/.exec(D);D={architecture:32,family:l?D.replace(l[0],""):D,version:l?l[1]:null,toString:function(){var e=this.version;return this.family+(e?" "+e:"")+(this.architecture==64?" 64-bit":"")}}}if((l=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(m))&&!/\bi686\b/i.test(m)){if(D){D.architecture=64;D.family=D.family.replace(RegExp(" *"+l),"")}O&&(/WOW64/i.test(n)||k&&/\w(?:86|32)$/.test(c.cpuClass||c.platform))&&g.unshift("32-bit")}n||(n=null);return{version:O&&L&&(g.unshift(L),L),name:O&&(g.unshift(O),O),os:D?(O&&(D!=String(D).split(" ")[0]||D!=O.split(" ")[0]&&!M)&&g.push(M?"("+D+")":"on "+D),D):{architecture:null,family:null,version:null,toString:function(){return"null"}},description:g.length?g.join(" "):n,layout:A&&A[0],manufacturer:_,prerelease:E,product:M,ua:n,parse:C,toString:q}}var t=e,n=typeof exports=="object"&&exports,r=typeof global=="object"&&global&&(global==global.global?e=global:global),i=/Opera/,s={}.toString,o=/Java/.test(w(e.java))&&e.java,u=o?"a":"α",a=o?"b":"β",f=e.document||{},l={}.hasOwnProperty,c=e.navigator||{},h=e.operamini||e.opera,p=i.test(p=w(h))?p:h=null,d=this,v=c.userAgent||"";typeof define=="function"&&typeof define.amd=="object"&&define.amd?define(function(){return C()}):n?b(C(),function(e,t){n[t]=e}):e.platform=C()})(this);