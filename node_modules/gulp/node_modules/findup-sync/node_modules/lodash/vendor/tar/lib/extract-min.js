// give it a tarball and a path, and it'll dump the contents
function Extract(e){if(!(this instanceof Extract))return new Extract(e);tar.Parse.apply(this);e.type="Directory";e.Directory=!0;typeof e!="object"&&(e={path:e});e.path=e.path||path.resolve("node-tar-extract");e.type="Directory";e.Directory=!0;e.strip=+e.strip;if(!e.strip||e.strip<=0)e.strip=0;this._fst=fstream.Writer(e);this.pause();var t=this;t.on("entry",function(t){if(e.strip){var n=t.path.split("/").slice(e.strip).join("/");t.path=t.props.path=n;if(t.linkpath){var r=t.linkpath.split("/").slice(e.strip).join("/");t.linkpath=t.props.linkpath=r}}if(t.type!=="Link")return;t.linkpath=t.props.linkpath=path.join(e.path,path.join("/",t.props.linkpath))});this._fst.on("ready",function(){t.pipe(t._fst,{end:!1});t.resume()});this._fst.on("close",function(){t.emit("end");t.emit("close")})}module.exports=Extract;var tar=require("../tar.js"),fstream=require("../vendor/fstream/fstream.js"),inherits=require("../vendor/inherits/inherits.js"),path=require("path");inherits(Extract,tar.Parse);Extract.prototype._streamEnd=function(){var e=this;e._ended||e.error("unexpected eof");e._fst.end()};