var gaze=require("gaze"),EventEmitter=require("events").EventEmitter;module.exports=function(e,t,n){var r=new EventEmitter;if(typeof t=="function"){n=t;t={}}var i=gaze(e,t,function(e,t){t.on("all",function(e,t,i){var s={type:e,path:t};i&&(s.old=i);r.emit("change",s);n&&n(s)})});i.on("end",r.emit.bind(r,"end"));i.on("error",r.emit.bind(r,"error"));i.on("ready",r.emit.bind(r,"ready"));r.end=function(){return i.close()};r.files=function(){return i.watched()};r.add=function(){return i.add.apply(i,arguments)};r.remove=function(){return i.remove()};r._watcher=i;return r};