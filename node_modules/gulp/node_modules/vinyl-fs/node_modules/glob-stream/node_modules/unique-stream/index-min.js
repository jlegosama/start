function prop(e){return function(t){return t[e]}}function unique(e){var t=JSON.stringify;typeof e=="string"?t=prop(e):typeof e=="function"&&(t=e);var n={},r=new Stream;r.readable=!0;r.writable=!0;var i=0;r.write=function(e){var i=t(e);if(n[i]===undefined){n[i]=!0;r.emit("data",e)}};var s=0;r.end=function(e){arguments.length&&r.write(e);s++;if(s===i||i===0){r.writable=!1;r.emit("end")}};r.destroy=function(e){r.writable=!1};r.on("pipe",function(){i++});r.on("unpipe",function(){i--});return r}var Stream=require("stream");module.exports=unique;