var test=require("tap").test,fs=require("../graceful-fs.js");test("graceful fs is monkeypatched fs",function(e){e.equal(fs,require("fs"));e.end()});test("open an existing file works",function(e){var t=fs.openSync(__filename,"r");fs.closeSync(t);fs.open(__filename,"r",function(t,n){if(t)throw t;fs.close(n,function(t){if(t)throw t;e.pass("works");e.end()})})});test("open a non-existing file throws",function(e){var t;try{var n=fs.openSync("this file does not exist","r")}catch(r){t=r}e.ok(t,"should throw");e.notOk(n,"should not get an fd");e.equal(t.code,"ENOENT");fs.open("neither does this file","r",function(t,n){e.ok(t,"should throw");e.notOk(n,"should not get an fd");e.equal(t.code,"ENOENT");e.end()})});