function getAttribCheck(e,t){return typeof t=="function"?function(n){return n.attribs&&t(n.attribs[e])}:function(n){return n.attribs&&n.attribs[e]===t}}function combineFuncs(e,t){return function(n){return e(n)||t(n)}}var ElementType=require("domelementtype"),isTag=exports.isTag=ElementType.isTag;exports.testElement=function(e,t){for(var n in e)if(!!e.hasOwnProperty(n))if(n==="tag_name"){if(!isTag(t)||!e.tag_name(t.name))return!1}else if(n==="tag_type"){if(!e.tag_type(t.type))return!1}else if(n==="tag_contains"){if(isTag(t)||!e.tag_contains(t.data))return!1}else if(!t.attribs||!e[n](t.attribs[n]))return!1;return!0};var Checks={tag_name:function(e){return typeof e=="function"?function(t){return isTag(t)&&e(t.name)}:e==="*"?isTag:function(t){return isTag(t)&&t.name===e}},tag_type:function(e){return typeof e=="function"?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return typeof e=="function"?function(t){return!isTag(t)&&e(t.data)}:function(t){return!isTag(t)&&t.data===e}}};exports.getElements=function(e,t,n,r){var i=Object.keys(e).map(function(t){var n=e[t];return t in Checks?Checks[t](n):getAttribCheck(t,n)});return i.length===0?[]:this.filter(i.reduce(combineFuncs),t,n,r)};exports.getElementById=function(e,t,n){Array.isArray(t)||(t=[t]);return this.findOne(getAttribCheck("id",e),t,n!==!1)};exports.getElementsByTagName=function(e,t,n,r){return this.filter(Checks.tag_name(e),t,n,r)};exports.getElementsByTagType=function(e,t,n,r){return this.filter(Checks.tag_type(e),t,n,r)};