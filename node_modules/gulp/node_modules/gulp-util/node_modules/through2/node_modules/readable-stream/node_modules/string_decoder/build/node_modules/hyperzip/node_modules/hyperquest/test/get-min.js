function check(e,t){function i(e){r+=e}function s(){e.equal(r,"beep boop")}var n=hyperquest("http://localhost:"+t);n.pipe(through(i,s));n.on("response",function(t){e.equal(t.headers["content-type"],"text/robot-speak")});var r=""}var test=require("tap").test,http=require("http"),hyperquest=require("../"),through=require("through"),server=http.createServer(function(e,t){t.setHeader("content-type","text/robot-speak");t.end("beep boop")});test("get",function(e){e.plan(2);server.listen(0,function(){var n=server.address().port;check(e,n)});e.on("end",server.close.bind(server))});