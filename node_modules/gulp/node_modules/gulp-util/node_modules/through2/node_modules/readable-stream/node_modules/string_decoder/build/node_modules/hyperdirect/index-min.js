function direct(e,t){function r(n,r,i){function a(){u<0&&o.emit("error",new Error("The response was redirected "+(t+1)+" times and the `maxRedirects` option was set to "+t));e(r,function(e,t){if(e)return o.emit("error",e);t.url=r.uri;if(isRedirect(t.statusCode)){u--;o.emit("redirect",t);r.uri=t.headers.location;return a()}o.emit("response",t);this.pipe(o)})}if(typeof n=="object"){i=r;r=n;n=undefined}if(typeof r=="function"){i=r;r=undefined}r||(r={});n!==undefined&&(r.uri=n);var s=(r.method||"GET").toUpperCase();if(s!="GET")return e(r,i);var o=through(),u=t;a();if(i){o.on("error",i);o.on("response",function(e){i.call(o,null,e)})}return o}if(typeof e=="number"){var n=e;e=t;t=n}e===undefined&&(e=hyperquest);t===undefined&&(t=10);typeof e.request=="function"&&(e=e.request);if(e.isCap)throw new Error('The subquest argument "'+e+'" was invalid.  You must use a valid hyperquest module that is not a cap.');r.request=r;return r}function isRedirect(e){return e===301||e===302||e===307||e===308}var through=require("through"),hyperquest=require("hyperquest");module.exports=direct;module.exports.request=direct(hyperquest);